<%- include('../partials/admin-header') %>

<div class="breadcrumb">
  <a href="/admin">Dashboard</a> &raquo;
  <a href="/admin/roles">Roles</a> &raquo;
  <span>Edit: <%= role.name %></span>
</div>

<h1 class="page-title">Edit Role: <%= role.name %></h1>

<div class="form-container">
  <form action="/admin/roles/edit/<%= role.id %>" method="POST" class="admin-form">
    <div class="form-row">
      <div class="form-group">
        <label for="name">Role Name</label>
        <input type="text" id="name" name="name" required value="<%= role.name %>">
      </div>
      <div class="form-group">
        <label for="description">Description</label>
        <input type="text" id="description" name="description" value="<%= role.description || '' %>">
      </div>
    </div>

    <div class="form-group">
      <label>Permissions</label>
      <p class="text-muted" style="margin-bottom:12px;font-size:0.9rem">Select which permissions this role should have:</p>
      <div class="permissions-grid">
        <% permissions.forEach(perm => { %>
          <label class="permission-checkbox">
            <input type="checkbox" name="permissions" value="<%= perm.id %>"
              <%= assignedPermIds.includes(perm.id) ? 'checked' : '' %>>
            <div class="permission-info">
              <strong><%= perm.label %></strong>
              <span><%= perm.description || '' %></span>
            </div>
          </label>
        <% }) %>
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary btn-large">Save Permissions</button>
      <a href="/admin/roles" class="btn btn-outline">Cancel</a>
    </div>
  </form>
</div>

<%- include('../partials/admin-footer') %>
